console.log("Самооценка Portfolio#1");
console.log("1.Вёрстка валидная +10\n" +
    "2.Вёрстка семантическая (+20):\n" +
    "В коде странице присутствуют следующие элементы (указано минимальное количество, может быть больше):\n" +
    "2.1. <header>, <main>, <footer> +2\n" +
    "2.2. шесть элементов <section> (по количеству секций) +2\n" +
    "2.3. только один заголовок <h1> +2\n" +
    "2.4. пять заголовков <h2> +2\n" +
    "2.5. один элемент <nav> (панель навигации) +2\n" +
    "2.6. два списка ul > li > a (панель навигации, ссылки на соцсети) +2\n" +
    "2.7. десять кнопок <button> +2\n" +
    "2.8. два инпута: <input type=\"email\"> и <input type=\"tel\"> +2\n" +
    "2.9. один элемент <textarea> +2\n" +
    "2.10 три атрибута placeholder +2\n" +
    "3. Вёрстка соответствует макету (+48): \n" +
    "3.1. блок <header> +6\n" +
    "3.2. секция hero +6\n" +
    "3.3. секция skills +6\n" +
    "3.4. секция portfolio +6\n" +
    "3.5. секция video +6\n" +
    "3.6. секция price +6\n" +
    "3.7. секция contacts +6\n" +
    "3.8. блок <footer> +6\n" +
    "4. Требования к css (+12): \n" +
    "4.1. для построения сетки используются флексы или гриды +2\n" +
    "4.2. при уменьшении масштаба страницы браузера вёрстка размещается по центру, а не сдвигается в сторону +2\n" +
    "4.3. фоновый цвет тянется на всю ширину страницы +2\n" +
    "4.4. иконки добавлены в формате .svg. SVG может быть добавлен любым способом. Обращаем внимание на формат, а не на способ добавления +2\n" +
    "4.5. изображения добавлены в формате .jpg +2\n" +
    "4.6. есть favicon +2\n" +
    "5. Интерактивность, реализуемая через css (+20): \n" +
    "5.1. плавная прокрутка по якорям +5\n" +
    "5.2. ссылки в футере ведут на гитхаб автора проекта и на страницу курса https://rs.school/js-stage0/ +5\n" +
    "5.3. интерактивность включает в себя не только изменение внешнего вида курсора, например, при помощи свойства cursor: pointer, но и другие визуальные эффекты, например, изменение цвета фона или цвета шрифта. Если в макете указаны стили при наведении и клике, для элемента указываем эти стили. Если в макете стили не указаны, реализуете их по своему усмотрению, руководствуясь общим стилем макета +5\n" +
    "5.4. обязательное требование к интерактивности: плавное изменение внешнего вида элемента при наведении и клике не влияющее на соседние элементы +5");

console.log("Самооценка Portfolio#2");
console.log("Самооценка: 85 баллов\n" +
    "Вёрстка соответствует макету. Ширина экрана 768px +48\n" +
    "блок <header> +6\n" +
    "секция hero +6\n" +
    "секция skills +6\n" +
    "секция portfolio +6\n" +
    "секция video +6\n" +
    "секция price +6\n" +
    "секция contacts +6\n" +
    "блок <footer> +6\n" +
    "Ни на одном из разрешений до 320px включительно не появляется горизонтальная полоса прокрутки +15\n" +
    "нет полосы прокрутки при ширине страницы от 1440рх до 768рх +5\n" +
    "нет полосы прокрутки при ширине страницы от 768рх до 480рх +5\n" +
    "нет полосы прокрутки при ширине страницы от 480рх до 320рх +5\n" +
    "На ширине экрана 768рх и меньше реализовано адаптивное меню +22\n" +
    "при ширине страницы 768рх панель навигации скрывается, появляется бургер-иконка +2\n" +
    "при нажатии на бургер-иконку справа плавно появляется адаптивное меню, бургер-иконка изменяется на крестик +4\n" +
    "высота адаптивного меню занимает всю высоту экрана. При ширине экрана 768-620рх вёрстка меню соответствует макету, когда экран становится уже, меню занимает всю ширину экрана +4\n" +
    "при нажатии на крестик адаптивное меню плавно скрывается уезжая за правую часть экрана, крестик превращается в бургер-иконку +4\n" +
    "бургер-иконка, которая при клике превращается в крестик, создана при помощи css-анимаций без использования изображений +2\n" +
    "ссылки в адаптивном меню работают, обеспечивая плавную прокрутку по якорям +2\n" +
    "при клике по ссылке в адаптивном меню адаптивное меню плавно скрывается, крестик превращается в бургер-иконку +4")

console.log("Самооценка Portfolio#3");
console.log("Смена изображений в секции portfolio +25\n" +
    "Изображения разных времён года получаем из папок с соответствующими названиями\n" +
    "при кликах по кнопкам Winter, Spring, Summer, Autumn в секции portfolio отображаются изображения из папки с соответствующим названием +20\n" +
    "кнопка, по которой кликнули, становится активной т.е. выделяется стилем. Другие кнопки при этом будут неактивными +5\n" +
    "Перевод страницы на два языка +25\n" +
    "при клике по надписи ru англоязычная страница переводится на русский язык +10\n" +
    "при клике по надписи en русскоязычная страница переводится на английский язык +10\n" +
    "надписи en или ru, соответствующие текущему языку страницы, становятся активными т.е. выделяются стилем +5\n" +
    "Переключение светлой и тёмной темы +25\n" +
    "тёмная тема приложения сменяется светлой +10\n" +
    "светлая тема приложения сменяется тёмной +10\n" +
    "после смены светлой и тёмной темы интерактивные элементы по-прежнему изменяют внешний вид при наведении и клике и при этом остаются видимыми на странице (нет ситуации с белым шрифтом на белом фоне) +5\n" +
    "Дополнительный функционал: выбранный пользователем язык отображения страницы и светлая или тёмная тема сохраняются при перезагрузке страницы +5\n" +
    "Дополнительный функционал: сложные эффекты для кнопок при наведении и клике +5\n");

const burger = document.querySelector(".burger-menu");
const menu = document.querySelector(".nav-list");

const shadowDiv = document.createElement("div");

function toggleMenu() {
    burger.classList.toggle('open');
    menu.classList.toggle('active');
    shadowDiv.classList.toggle('shadow-wrapper');

    if (burger.classList.contains("open")) {
        shadowDiv.style.display = "block";
        document.body.style.position = "relative";
        document.body.style.transition = "0.5s all ease";
        document.body.append(shadowDiv);
    }

    if (!burger.classList.contains("open")) {
        shadowDiv.style.display = "none";
    }

    if ((burger.classList.contains("open")) && (!themeSwitcher.classList.contains("light-theme-switch"))) {
        document.documentElement.style.setProperty('--burger-line-color-light', '#fff');
    }

}

burger.addEventListener('click', toggleMenu);

const navList = document.querySelector(".nav-list");
navList.addEventListener('click', closeMenu);

function closeMenu(event) {
    if (event.target.classList.contains('nav-link')) {
        burger.classList.remove('open');
        menu.classList.remove('active');
        shadowDiv.classList.remove("shadow-wrapper");
    }
}

const seasons = ['winter', 'spring', 'summer', 'autumn'];

function preloadImages() {

    for (let i =0; i< seasons.length; i++) {
        for(let j = 1; j <= 6; j++) {
            const img = new Image();

            if (seasons[i] === "winter") {
                img.src = `./assets/img/winter/${j}.jpg`;
            }

            if (seasons[i] === "spring") {
                img.src = `./assets/img/spring/${j}.jpg`;
            }

            if (seasons[i] === "summer") {
                img.src = `./assets/img/summer/${j}.jpg`;
            }

            if (seasons[i] === "autumn") {
                img.src = `./assets/img/autumn/${j}.jpg`;
            }

        }
    }

}

preloadImages();

const portfolioBtns = document.querySelector('.portfolio-buttons');

function changeImage(event) {

       if(event.target.classList.contains('portfolio-btn')) {

        const allPortfolioImages = document.querySelectorAll('.portfolio-image');

           allPortfolioImages.forEach((img, index) => {

               if (event.target.dataset.season === "winter") {
                   img.src = `./assets/img/winter/${index + 1}.jpg`
               }

               if (event.target.dataset.season === "spring") {
                   img.src = `./assets/img/spring/${index + 1}.jpg`
               }

               if (event.target.dataset.season === "summer") {
                   img.src = `./assets/img/summer/${index + 1}.jpg`
               }

               if (event.target.dataset.season === "autumn") {
                   img.src = `./assets/img/autumn/${index + 1}.jpg`
               }
        });
}
}

portfolioBtns.addEventListener("click", changeImage);

const allPortfolioButtons = document.querySelectorAll('.portfolio-btn');

function changeActive(event) {
    const allPortfolioButtons = document.querySelectorAll('.portfolio-btn');
    allPortfolioButtons.forEach(button => button.classList.remove("active"));

    if (event.target.classList.contains('portfolio-btn')) {
       if (!event.target.classList.contains('active')) {
            event.target.classList.add("active");
        }
    }
}

allPortfolioButtons.forEach(button => button.addEventListener("click", changeActive));

const sectionToChangeTheme = ["skills", "portfolio", "video", "price", "main-container"];
const blockChangeTheme = [
    "section-title",
    "skills-item-heading",
    "skills-item-text",
    "portfolio-btn",
    "price-item-heading",
    "price-item-text"
]

let theme = "dark";

const allPortfolioBtns = document.querySelectorAll(".portfolio-btn");
const themeSwitcher = document.querySelector(".theme-switcher");
themeSwitcher.addEventListener("click", changeTheme);

function changeTheme() {
    themeSwitcher.classList.toggle("light-theme-switch");
}

themeSwitcher.addEventListener("click", changeActiveClass);

function changeActiveClass() {
    sectionToChangeTheme.forEach(className => {

        let selectedElement = document.querySelector(`.${className}`);
        selectedElement.classList.toggle("light-theme");

        if (selectedElement.classList.contains("light-theme")) {
            document.body.style.backgroundColor = "#fff";
            document.documentElement.style.setProperty('--line-color', '#000');
            document.documentElement.style.setProperty('--menu-background', '#fff');
            document.documentElement.style.setProperty('--navlink-color', '#000');
            document.documentElement.style.setProperty('--burger-line-color-light', '#000');
            document.documentElement.style.setProperty('--burger-line-color-dark', '#fff');
            theme = "light";

        } else {
            document.body.style.backgroundColor = "#000";
            document.documentElement.style.setProperty('--line-color', '#BDAE82');
            document.documentElement.style.setProperty('--menu-background', '#000');
            document.documentElement.style.setProperty('--navlink-color', '#fff');
            document.documentElement.style.setProperty('--burger-line-color-light', '#fff');
            document.documentElement.style.setProperty('--burger-line-color-dark', '#fff');
            theme = "dark";
        }

    });

    function setLocalStorage() {
        localStorage.setItem('theme', theme);
    }
    window.addEventListener('beforeunload', setLocalStorage);


    blockChangeTheme.forEach(className => {
        let selectedElement = document.querySelectorAll(`.${className}`);
        selectedElement.forEach(elem => {
            elem.classList.toggle("light-theme-text");

        })
    });

    allPortfolioBtns.forEach(button => {
        button.classList.toggle("light-theme-btn");
    });

}

function getLocalStorage() {
    if(localStorage.getItem('theme')) {
        const theme = localStorage.getItem('theme');

        let event = new Event('click');

        if (theme === "light") {
            themeSwitcher.dispatchEvent(event)
        }
    }
}
window.addEventListener('load', getLocalStorage);

let event = new Event("click");
allPortfolioBtns.forEach(btn => {
    if (btn.dataset.season === "autumn") {
       btn.dispatchEvent(event);
    }
})

